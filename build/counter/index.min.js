/*! 2014-01-20 */
var arith=function(){function a(a,b){return b.times-a.times}function b(a,b){return b.len-a.len}return{times:a,len:b}}(),analy=function(){function a(a){var b=a.match(d),e=c(b);return e}function b(a){var b={};return b.times=1,b.word=a,b.len=a.length,b}function c(a){var c=[],d={};return $.each(a,function(a,c){if(c){var e=d[c];e?e.times++:(e=b(c),d[c]=e)}}),$.each(d,function(a,b){c.push(b)}),c}var d=/(\b\w+\b)|[\u2E80-\u9FFF]/g;return{parse:a}}(),operation=function(){function a(a){var b="word="+JSON.stringify(a);$.ajax({url:"http://localhost:8888/save",type:"post",data:b,datatype:"json",success:function(a){console.log("save:"+a)}})}function b(a){$.ajax({url:"http://localhost:8888/load",type:"post",data:"uid="+a,datatype:"json",success:function(a){console.log("load:"+a)}})}return{save:a,load:b}}(),page=function(){function a(){var a=[];$("#analyse").on("click",function(){var c=$("#textarea").val();a=analy.parse(c),b("result",a.sort(arith.times))}),$("#sort").delegate("a","click",function(){$("#sort .alert").removeClass("alert"),$(this).addClass("alert");var c=$(this).data("sort");b("result",a.sort(arith[c]))}),$("#oper").delegate("a","click",function(){var b=$(this).data("oper");if("save"==b)a.length>0?operation.save(a):alert("Please insert your article and analyse it first!");else if("load"==b){var c="letica";operation.load(c)}}),$("#clear").on("click",function(){a=[],$("#textarea").val(""),$("#result table>tbody").html("")})}function b(a,b){$.template("ResultTmpl",tmpl.mkTmpl()),$("#"+a+" table>tbody").html($.tmpl("ResultTmpl",b))}return{bind:a}}(),tmpl=function(){function a(){var a=[];return a.push("<tr><td>${word}</td><td>${times}</td><td>${len}</td></tr>"),a.join(" ")}return{mkTmpl:a}}();$(function(){function a(){page.bind()}a()});